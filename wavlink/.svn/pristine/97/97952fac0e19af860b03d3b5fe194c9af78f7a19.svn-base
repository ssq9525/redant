apply plugin: 'com.android.library'
//apply plugin: 'com.android.application'

def _BASENAME = "wavlinkJar";
def _VERSION = "_V1.0";
def _DestinationPath = "build"; //生成jar包的位置
//def zipFile = file('build/intermediates/bundles/default/wavlink.jar'); //待打包文件位置
//def zipFile = file('build//wavlink.jar'); //待打包文件位置
def zipFile = file('build/intermediates/intermediate-jars/release/classes.jar'); //待打包文件位置


task deleteBuild(type:Delete){
    delete _DestinationPath + _BASENAME + _VERSION + ".jar"
}

task makeJar(type:Jar){
    from zipTree(zipFile)
    from fileTree(dir:'src/main',includes:['assets/**']) //将assets目录打入jar包
    baseName = _BASENAME + _VERSION
    destinationDir = file(_DestinationPath)
}

makeJar.dependsOn(deleteBuild, build)

android {
    lintOptions {
        abortOnError false
    }

    compileSdkVersion 28
    defaultConfig {
        //applicationId "com.xby.ssq.wavlink"
        minSdkVersion 26
        targetSdkVersion 28
        versionCode 1
        versionName "1.0"
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    //app--------------------------------------
    implementation 'com.android.support:appcompat-v7:28.0.0'

    implementation fileTree(include: ['*.jar'], dir: 'libs')
    implementation "com.android.support.constraint:constraint-layout:${constraintayoutLVersion}"

    testImplementation "junit:junit:${junitVersion}"
    androidTestImplementation "com.android.support.test:runner:${testRunnerVersion}"
    androidTestImplementation "com.android.support.test.espresso:espresso-core:${testEspressoVersion}"

    implementation 'com.jakewharton:butterknife:8.5.1'
    annotationProcessor 'com.jakewharton:butterknife-compiler:8.5.1'
    //common-----------------------------------------------
    api "io.reactivex.rxjava2:rxandroid:${rxandroidVersion}"
    api "io.reactivex.rxjava2:rxjava:${rxjavaVersion}"
    //retorfit
    api "com.squareup.retrofit2:retrofit:${retrofitVersion}"
    api "com.squareup.retrofit2:converter-gson:${retrofitVersion}"

    api "com.squareup.retrofit2:adapter-rxjava2:${retrofitVersion}"
    api "com.google.code.gson:gson:${gsonVersion}"

    api files('libs/ormlite-android-4.48.jar')
    api files('libs/ormlite-core-4.48.jar')

    //api "com.android.support:design:${v7Version}"

    api 'org.greenrobot:eventbus:3.1.1'
    api 'com.squareup.okhttp3:logging-interceptor:3.6.0'
    //commonapp------------------------------------------------------


}
